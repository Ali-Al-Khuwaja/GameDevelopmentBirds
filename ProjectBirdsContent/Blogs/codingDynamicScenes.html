<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>برمجة مشاهد بطريقة ديناميكية</title>
    <link rel="stylesheet" href="codingDynamicScenes.css">
    <link rel="stylesheet" href="/node_modules/normalize.css/normalize.css">
    <link rel="icon" href="/assets/greenBirdTitle.png" type="image/icon type">
    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rakkas&display=swap" rel="stylesheet">

</head>
<body>
    <header>
        <!-- This part is for the navigation bar-->
        <nav>
            <div class="left-nav-side">
                <ul>
                    <li><img src="assets/greenBird.png" alt="project birds logo" id="logo"></li>
                    <li><a href="/index.html" class="minimal-anchors">مشروع طيور</a></li>
                </ul>
            </div>
            <div class="right-nav-side">
                <ul>
                    <li><a href="/ProjectBirdsContent/whatIsProjectBirds.html" class="minimal-anchors">ما هو مشروع طيور</a></li>
                    <li><a href="/ProjectBirdsContent/attributionPage.html" class="minimal-anchors">صفحة الإسناد</a></li>
                    <li><a href="/ProjectBirdsContent/aboutProjectBirds.html" class="minimal-anchors">المدونة</a></li>
                </ul>
            </div>
        </nav>
        <!-- THis part is for the introduction title -->
        <div class="blog-title-container" dir="rtl">
            <h1 class="title">إنشاء مشاهد عن طريق البرمجة</h1>
            <h2 class="subtitle"> شرح كيفية إنشاء مشاهد بطريقة ديناميكية عن طريقة GDScript</h2>
            <img src="/assets/33778122_6ccc.png" alt="main background" class="blog-bg">
        </div>
    </header>
    <main>
        <article dir="rtl">
            <section>
                <h1>- متطلبات مسبقة</h1>
                <p>فهم جيد لنظام الاشعارات في محرك Godot</p>
            </section>
            <h1>برمجة مشاهد ؟</h1>
            <p>إنشاء المشاهد هو أمر نستطيع فعله من داخل محرر محرك Godot  ولكن ماذا لو كان لدينا مشهد نريد إنشائه أثناء لعب اللعبة , فكر بمشهد اطلاق الرصاص مثلاً ؟ أجل الرصاصة تعتبر مشهد ,يجب علينا معرفة طريقة لإنشاء مشهد الرصاص بطريقة ديناميكية وطبعاً الجواب يكون عن طريق برمجة طريقة لإنشاء المشاهد بشكل ما عن طريق شروط معينة , إذا استطعت فعل ذلك فهذا يعني أنك ستستطيع إنشاء العديد من المشاهد بطريقة ديناميكية</p>
            <p>ربما الفكرة ليست واضحة حتى الان , ما أقصده بإنشاء مشاهد برمجياً ليس كما تظن , كل ما في الامر هو عبارة عن ثلاثة نقاط بسيطة وهي : </p>
            <ol>
                <li>إنشاء مشهد </li>
                <li>إنشاء نسخة عن المشهد المطلوب</li>
                <li>برمجة طريقة لنسح هذه المشاهد برمجياً أثناء اللعب</li>
            </ol>
            <p>القدرة على إطلاق الرصاص تعتبر مثال مناسب لموضوع هذا المقال , دعنا نتبع الخطوات التي اتفقنا عليها . </p>
            <ol>
            <li>إنشاء مشهد</li>
            </ol>
            <p>قم بتحضير المشهد الذي تريد إستعماله , في هذه المثال سأستخدم مشهد رصاصة لاني أود أن يطلق اللاعب النار على الأعداء .</p>
            <img src="/assets/dynamicScenes/Screenshot from 2024-03-29 01-02-34.png" alt="مشهد لرصاصة">
            <p>في البداية يجب علينا ربط اشعار مع صفحة برمجة المرحلة فلذلك سأنشئ اشعار برمجياً لذلك (لا تنسى ذلك). </p>
            <p>الان كل ما علينا هو معرفة كيفية إنشاء مثيل لمشهد الرصاص , أنا لا أعرف كيف , لذلك قمت ببحث بسيط وأكتشفت دالة ()instantiate</p>
            <p>هذه الدالة تسمح لنا بفعل نفس الشيء الذي يفعله هذا الزر في المحرر </p>
            <img src="/assets/dynamicScenes/instantiateButton.png" alt="زر إنشاء مثيل في محرر محرك ">
            <p>حسناً , لدينا الدالة لإنشاء مثيل لكن لا نعرف كيف نستغلها , هل هناك طريقة لتخزين قيمة مشهد في متغير مثلاً , أجل هناك طريقة . أقدم لكم</p>
            
            <h1 id="loadingandpreloading">()loading() and preloading</h1>
            
                <p>كلاهما يؤدي وظيفة واحد وهي تخزين مشهد في متغير  ولكن ما الفرق بينهما ؟ </p>
                
                <h2 id="">الأداء</h2>
                
                <p>() load يقوم بتحميل المشهد أثناء لعب اللعبة، مما قد يتسبب في توقف مؤقت أو تباطؤ ملحوظ أثناء قيام المحرك بجلب بيانات المشهد ومعالجتها. هذا ينطبق بشكل خاص على المشاهد المعقدة لانه سيحدث تحميل أثناء اللعب </p>
                
                <p>()  preload يقوم بتحميل المشاهد أثناء عملية التجميع-compilation process أو بدء تشغيل المحرر (لغات أخرى)، مما يضمن توفرها بسهولة في الذاكرة عند الحاجة، مما يؤدي إلى لعب أكثر سلاسة , بمعنى أخر أنه لن يحدث أثناء لعب اللعبة توقف مؤقت أو أي تباطؤ</p>
                
                <p>في حين أن <code>preload()</code> هي الطريقة المحببة بشكل عام لتحميل المشاهد في Godot 4، إلا أن هناك بعض السيناريوهات المحددة  التي يكون فيها <code>load()</code> خيارًا أكثر ملاءمة. فيما يلي بعض الحالات التي قد تفكر في استخدام <code>load()</code> فيها </p>
                
                <p><strong>تحميل مشاهد ديناميكياً:</strong></p>
                
                <ul>
                <li>إذا كانت لعبتك تتطلب تحميل المشاهد بناءً على اختيارات اللاعب أو أحداث اللعبة  التي تحدث أثناء اللعب، فقد يكون <code>load()</code> مفيدًا. على سبيل المثال، تخيل شاشة اختيار المرحلة حيث يختار اللاعب المرحلة هنا يجب تحميل المشهد المرحلة المحددة أثناء اللعب.</li>
                </ul>
                
                <p><strong>المقايضات التي يجب مراعاتها:</strong></p>
                
                <p>من المهم أن تكون على دراية بالمقايضات عند استخدام <code>load()</code>:</p>
                
                <ul>
                <li><strong>الأداء:</strong> كما ذكرنا من قبل، يمكن أن يتسبب <code>load()</code> في انخفاض الأداء أثناء اللعب بسبب عملية التحميل التي تحدث في وقت التشغيل. يجب عليك استخدامه بحكمة والنظر في طرق بديلة مثل ()preload للمشاهد الشائعة لتحميل المشهد </li>
                
                <li><strong>تعقيد التعليمات البرمجية:</strong> قد يؤدي استخدام <code>load()</code> في منطق اللعبة إلى جعل التعليمات البرمجية الخاصة بك أقل قابلية للقراءة والصيانة. ستحتاج إلى التعامل مع أخطاء التحميل المحتملة وإدارة موارد المشهد المحملة خلال التعليمات البرمجية الخاصة بك.</li>
                </ul>
                
                <h2><em> توصية عامة:</em></h2>
                
                <p>على الرغم من أن <code>load()</code> له استخداماته، فمن المستحسن بشكل عام إعطاء الأولوية <code>preload()</code> لمعظم تحميل المشاهد في Godot 4. ومن خلال التحميل المسبق للمشاهد الأساسية، ستضمن تجربة لعب أكثر سلاسة . إذا واجهت مواقف محددة حيث يكون تحميل المشهد الديناميكي ضروريًا، فاستخدم <code>load()</code> بشكل استراتيجي مع مراعاة المفاضلات بين الأداء وتعقيد التعليمات البرمجية.</p>
                
                <p>حسناً الان بت على دراية في هذه الدوال وكل ما تبقى هو تخزين مشهد ما في متغير ثم استدعاء دالة ()instantiate عليه ليضاف إلى شجرة عقد المشهد الحالي ؟
                هممم صحيح لكن هناك شئ أخير وهو add-child()</p>
                
                <h2 id="instantiate">instantiate()</h2>
                
                <p>الوظيفة: تشبه نسخ ملف (مثل ctrl + c) في نظام التشغيل الخاص بك. تقوم بإنشاء مثيل جديد (نسخة) لمشهد تم تحميله مسبقًا preloaded.</p>

                <p>كيف تعمل ؟ : يأخذ مورد PackedScene، الذي يعمل مثل ملف مشهد الرصاصة الذي تريد نسخه.</p>

                <p>الإخراج: ستعطي شجرة عقد جديدة فيها المشهد الذي تم إنشاء مثيل له. هذه النسخة من شجرة العقد وهمية ، لانها فقط موجودة بشكل مستقل في الذاكرة. (إفتراضية)</p>
                
                <h2 id="add_child">add_child()</h2>
                <p>الوظيفة: تشبه لصق ملف منسوخ (مثل ctrl + v). فهو يضيف عقدة (المشهد الذي تم إنشاء مثيل له-instantitaed ) إلى شجرة العقد الواقعية</p>

                <p>كيف تعمل ؟  تأخذ عاملين:</p>

                <p>العقدة الجذر : تشبه مسار المجلد  حيث أنك تريد لصق الملف المنسوخ( في هذا المثال سيكون node لاني برمجتها في صفحة البرمجة الخاصة بها)</p>

                <p>العقدة الفرعية : (المشهد الذي تم إنشاء مثيل له(الرصاصة)): هذا هو المشهد المنسوخ الذي تريد إدراجه في التسلسل الهرمي للعقدة الجذر.</p>

            <p>الإخراج: المشهد ملصق في اللعبة</p>
                                
                <p>أخيرا بعد ما فهمنا ما يحدث
                يمكننا بكل بساطة الآن</p>
                
                <p><code>const bullet_scene: PackedScene = preload("res://source/scenes/bullet.tscn")</code> <br>
                <code>()var paste_scene = bullet_scene.instantiate</code> <br>
                <code>add_child(paste_scene)</code></p>
                <iframe width="auto" height="515" src="https://www.youtube.com/embed/lhmrofFuw2U?si=Gu2zm2lzFZqc4MQf&rel=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                <p>تمكنت من إضافة مشهد برمجياً , لكن الرصاصة ثابتة في مكانها , ما تبقى بسيط , فقط سأجعل المشهد يتحرك , انها رصاصة طبعاً ستتحرك
                    من أول المشاكل التي ستلاحظها هي : </p>
                   <ol>
                   <li>الرصاصة ثابتة في مكانها</li>
                   <li>الرصاصة تظهر على إحداثيات (0,0) على محور س و ص دائماً </li>
                   </ol>
                   <h2 id="الرصاصة-تظهر-على-إحداثيات-00-دائماً--ما-العمل-؟">الرصاصة تظهر على إحداثيات (0,0) دائماً , ما العمل ؟</h2>
                   <p>من أول الاشياء التي كما قرأت فوق هي أن الرصاصة لا تخرج من فوهة سلاح اللاعب وإنما تظهر على إحداثيات (0,0) , هذا طبيعي , نحن لم نبرمج أي سطر لكي نحل المشكلة حتى الان , لذا هيا بنا نبرمج , في البداية سنستعلم عقدة marker2D , الفائدة الوحيدة منها أنها ستكون في مشهد اللاعب و ستتحرك معه مما يعني أنها ستغير إحداثيات ,أيضاً نحن لا نريد انا تخرج الرصاصات من رأس اللاعب , هذا سبب أخر لنستعمل هذه العقدة</p>
                   <p>العقدة موجودة في صفحة برمجة الاعب لذلك سنقوم بالتالي :</p>
                   <ol>
                   <li><p>عند الضغط على زر اطلاق سيحدث ما يلي :</p>
                   <ol>
                   <li> سيحدث إشعار لدالة ما في صفحة برمجة المرحلة بانه تم الضغط على الفأرة</li>
                   <li> سيخزن موقع عقدة marker2D  في متغير ما</li>
                   <li> سنرسل مع الاشعار الموقع العام (<code>global_position</code>)الخاص بعقدة marker2D </li>
                   </ol>
                   </li>
                   </ol>
                   <p><code>global_position</code>  ماذا ؟ لماذا لم تستعمل <code>position</code> العادية ؟
                   لان <code>position</code> لن تحل مشكلتنا </p>
                   <p>لتتذكر أو لتعلم ما الفرق بينهما </p>
                   <ul>
                   <li><code>position</code> تستخدم لمعرفة إحداثيات عقدة بالنسبة للعقدة الجذر </li>
                   <li><code>global_position</code>  تستخدم لمعرفة إحداثيات عقدة بالنسبة لنافذة اللعبة</li>
                   </ul>
                   <p>لنكمل , انتهينا من البرمجة في جهة صفحة برمجة اللاعب وتبقى فقط استعمال البيانات المعطية لصفحة برمجة المرحلة </p>
                   <p>علينا تجهيز دالة  الاشعار لتكون مستعدة لاستقبال المتغير الذي يحتوي معلومات إشعار في صفحة برمجة المرحلة</p>
                   <p>كيف؟ , فقط مرر المتغير في أقواس الدالة الخاصة في الاشعار لكي تستقبل المتغير الذي خزنت فيه عقدة marker2D ثم عين قيمة هذا المتغير إلى <code>position </code> الخاصة في المتغير الذي يحوي المشهد</p>
                   <p>في النهاية ستحصل على هذه الاضافات في صفحة برمجة اللاعب </p>
                   <img src="/assets/dynamicScenes/player_code.png" alt="new added code for player script">
                   <p>وفي صفحة برمجة المرحلة ستكون الاضافات </p>
                   <img src="/assets/dynamicScenes/live_scene_code.png" alt="new added code for level script">
                   <iframe width="auto" height="515" src="https://www.youtube.com/embed/Xvt3x4nAcvc?si=JgEZjGNQSqeeruOA&rel=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                   <p>قبل أن تذهب هناك شئ عليك رؤيته</p>
                   <p>لاحظ  كيف تظهر مشاهد رصاص في شجرة العقد , ها؟ هذه مشاهد يتم إنشائها ديناميكياً 😃 </p>
                   <iframe width="auto" height="515" src="https://www.youtube.com/embed/ba1ooXG75Jg?si=-YgKwHJ2HJnB-amQ&rel=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe> 
                   <p>لاحظ  كيف تظهر مشاهد رصاص في شجرة العقد , ها؟ هذه مشاهد يتم إنشائها ديناميكياً 😃 </p>                  
        </article>
    </main>
    <footer>
        <br>
        <ul>
            <a href="" class="minimal-anchors"><li>عنا</li></a>
            <a href="" class="minimal-anchors"><li>تواصل معنا</li></a>
            <a href="" class="minimal-anchors"><li>الأسئلة المتكررة</li></a>
            <a href="" class="minimal-anchors"><li>صفحة الاسناد</li></a>
        </ul>
        <br>
        <hr>
        <div class="legalStuff">
            <p>هذا العمل يخضع تحت رخصة الإسناد-غير تجاري-المشاركة بالمثل 4.0 الدولية</p>
            <div>
                <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en"><img src="/assets/by-nc-sa.svg" alt="cc-logo"></a>
            </div>
        </div>
</body>
</html>